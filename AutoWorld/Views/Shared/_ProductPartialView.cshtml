@model IEnumerable<AutoWorld.Models.Products>

@foreach (var item in Model)
{
    <!-- Product  -->

    <div class=" col-sm-6 col-lg-4 product-grid1">
        <div class="image">
            <a href="@Url.Action("DetailProduct","Details",new { id = item.Id })" title="">
                <img src="~/Content/Library/@Html.DisplayFor(modelItem => item.Image)" alt="">
            </a>
            <h4 class="text-center">@Html.DisplayFor(modelItem => item.Name)</h4>
            <h5 class="text-center">Price: $@Html.DisplayFor(modelItem => item.Price)</h5>
            @*<h5 class="text-center">@Html.DisplayFor(modelItem => item.description) seat</h5>*@
            <a href="@Url.Action("DetailProduct","Details",new { id = item.Id })" class=" buy btn btn-danger btn-lg ">Details</a>
            <a href="@Url.Action("AddToCart","Cart",new { id = item.Id })" class=" buy btn btn-danger btn-lg ml-3">Add Cart</a>
            @*<a>@Html.ActionLink("Add to Cart", "AddToCart", new { controller = "Cart", id = item.Id }, new { class=" buy btn btn-danger btn-lg ")</a>*@

            @{
                //JsonConvert.SerializeObject
                //Convert.
            }
        </div>
    </div>
    <!-- ./Product -->
}



<nav class="Page navigation col-12 d-flex ">
    <div class="col-2 "></div>
    <ul class="pagination justify-content-center col-8">

        @if (ViewBag.TotalPage > 1)
        {
            var pageDisplay = (int)ViewBag.MaxPage;
            int totalPage = (int)ViewBag.TotalPage;
            int currentPage = (int)ViewBag.Page;
            var startPageIndex = Math.Max(1, currentPage - pageDisplay / 2);
            var endPageIndex = Math.Min(totalPage, currentPage + pageDisplay / 2);

            var link = ViewBag.Link;

            if (currentPage > ViewBag.First)
            {
                <li class="page-item"><a data-ajax="true" data-ajax-loading="#LoadingFilter" data-ajax-update="#ResultFilter" data-ajax-method="GET" data-ajax-mode="replace" href="@link&pageIndex=@ViewBag.First" title="Trang Dau" class="first page-link"><i class="fa fa-angle-double-left"></i></a></li>
                <li class="page-item"><a data-ajax="true" data-ajax-loading="#LoadingFilter" data-ajax-update="#ResultFilter" data-ajax-method="GET" data-ajax-mode="replace" href="@link&pageIndex=@ViewBag.Prev" title="Trang Truoc" class="prev page-link"><i class="fa fa-angle-left"></i></a></li>
            }

            for (int i = startPageIndex; i <= endPageIndex; i++)
            {
                if (currentPage == i)
                {
                    <li class="page-item active"><a data-ajax="true" data-ajax-loading="#LoadingFilter" data-ajax-update="#ResultFilter" data-ajax-method="GET" data-ajax-mode="replace" href="@link&pageIndex=@i" class="page-link" title="Trang @i">@i</a></li>
                }
                else
                {
                    <li class="page-item"><a data-ajax="true" data-ajax-loading="#LoadingFilter" data-ajax-update="#ResultFilter" data-ajax-method="GET" data-ajax-mode="replace" href="@link&pageIndex=@i" class="page-link" title="Trang @i">@i</a></li>
                }
            }

            if (currentPage < totalPage)
            {
                <li class="page-item"><a data-ajax="true" data-ajax-loading="#LoadingFilter" data-ajax-update="#ResultFilter" data-ajax-method="GET" data-ajax-mode="replace" href="@link&pageIndex=@ViewBag.Next" title="Trang sau" class="next page-link"><i class="fa fa-angle-right"></i></a></li>
                <li class="page-item"><a data-ajax="true" data-ajax-loading="#LoadingFilter" data-ajax-update="#ResultFilter" data-ajax-method="GET" data-ajax-mode="replace" href="@link&pageIndex=@ViewBag.Last" title="Trang cuoi" class="last page-link"><i class="fa fa-angle-double-right"></i></a></li>
            }

        }
        </ul>
    <div class=" col-2">
        Total <span class="badge badge-success ">@ViewBag.Total</span> Products
    </div>
</nav>
    

